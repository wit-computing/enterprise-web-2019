## Phone Catalogue App.

### Setup.

In the terminal window, go to `threeApps/phoneCatalogue` folder and install the required packages:

        $ npm install
				
### UI Design.

The desired UI for this app will look as follows:

![][phonesUI]

A component breakdown for this UI is as follows:

![][phonesDesign]

This leads to a component hierarchy of the following:

                    App (Default)
                     | 
              -----------------
              |               |
       SelectControls     PhoneList
                              |
                           Phone

Remember, we are only developing a static version of the app in this lab - no user interaction works, yet. Ultimately the search text input will cause the app to compute a filtered list of matching phones, based on phone name. For now all phones in the catalogue will be displayed.

### Additional setup.

This app requires a sample data set. Unzip [this archive][data] and place  `Data.js` in the `src/` folder. This is the app's sample data set. Each phone object in the set has an image URL property. These image files (and related specification files to be used in a later lab) are available in [this zip][images]. Unzip it and move the `phoneSpecs` folder into `phoneCatalogue/public`, to give the following structure:

          phoneCatalogue
           |
           |---public
                |
                |----phoneSpecs
                      |
                      |--- etc

We will use Storybook in this app's component development. For your convenience, the necessary source files have been added to the project - see the `.storybook` and `stories` folders.

It is good practice to organize the `src/components` folder so that each component has its own sub-folder. Create the following file structure:

![][files]

The added advantage is each component's CSS is easily identified.

### Implementation.

The *SelectControls* component is the easiest. In `src/components/selectControls/index.js` place the following code:

	import React, { Component } from 'react';

	export default class SelectControls extends Component {
		render() {
			return (
					<div className="col-md-10">
							<input type="text" placeholder="Search" />
							<span> Sort by: </span>
							<select id="sort" >
									<option value="name">Alphabetical</option>
									<option value="age">Newest</option>
							</select>
					</div>
			);
		}
	}

In `stories/phoneApp.js` replace the code with this:

	import React from 'react';
	import { storiesOf } from '@storybook/react';
	import '../node_modules/bootstrap/dist/css/bootstrap.css';
	import SelectControls from '../src/components/selectControls';

	storiesOf('Phone Catalogue', module)
			.add('Select controls', 
				() => {    
					return <SelectControls /> ;
				}
			)
	
Start the Storybook server:

     $ npx start-storybook -s ./public -p 9001 -c .storybook

and open the interface in the browser: http://localhost:9001/

The component should render as expected.

In `src/components/phone/index.js` place the following code:

	import React, { Component } from 'react';
	import './phone.css';

	export default class Phone extends Component {
		render() {
				let url = 'phoneSpecs/' + this.props.phone.imageUrl;
				return (
					<li className="thumbnail phone_item">
						<a href={'/phones/' + this.props.phone.id} className="thumb" >
								<img src={url} alt={this.props.phone.name} /> 
						</a>
					<a href={'/phones/' + this.props.phone.id}> {this.props.phone.name}</a>
					<p>{this.props.phone.snippet}</p>
					</li>
			) ;
		}
	}

Some custom CSS is used above. Define it in `src/components/phone/phone.css`:

	.phone_item {
			height: 115px;
			padding-top: 15px;
		}

		.thumb {
			float: left;
			margin: -0.5em 1em 1.5em 0;
			padding-bottom: 1em;
			height: 100px;
			width: 100px
		}

In `stories/phoneApp.js` add a story for this component:

     . . . . other imports . . . . .
     import Phone from '../src/components/phone';
     import Phones from '../src/Data';   // Test data set

	 storiesOf('Phone Catalogue', module)
		.add('Select controls', 
	       . . . . . 
		)
		.add('Phone', 
	        () => {    
		       return <Phone phone={Phones[0]} /> ;
	        }
		)     
			
In the browser select this component. The image is not rendering. In the JSX code, the img tag is referencing a static file using a relative pathname. We need to contextualize it. Restart the server, as follows:

A relative pathname is used in the img tag
We need to tell Story

     $ start-storybook -s ./public -p 9001 -c .storybook

[-s for static directory name] The image should now appears in the Storybook rendering. 

The PhoneList component needs a prop containing an array of phone objects. It generates an array of Phone components, using the map method, from the object array. In `components/phoneList/index.js` place the following code:

      import React, { Component } from 'react';
      import Phone from '../phone'
      import './phoneList.css'

      export default class PhoneList extends Component {
          render() {
            let displayedPhones =  this.props.phones.map( 
                (phone) => <Phone key={phone.id} phone={phone } />
             ) ; // TODO
            return (
              <div className="col-md-10">
                <ul className="phones">
                    {displayedPhones}
                </ul>
              </div>
            ) ;
        }
      }

In `components/phone/phoneList.css` add a small amount of CSS:

	.phones {
		list-style: none;
		padding-top: 10px;
	}

In `stories/phoneApp.js` add a story for this component:

     . . . . other imports . . . . .
    import PhoneList from '../src/components/phoneList';

	storiesOf('Phone Catalogue', module)
          . . . . . )	
        .add('Phone list', 
           () => {    
             return <PhoneList phones={Phones} /> ;
           }
        )	

We now plug these components together to form the app. Stop Storybook server and start the app server:

       $ npm start

In `src/App.js` replace the entire content with the following:

		import React , { Component } from 'react';
		import Phones from  './Data';
		import PhoneList from './components/phoneList'
		import SelectControls  from './components/selectControls' ;

		class App extends Component {
			render() {
				let list = Phones ;
				return (
					<div className="jumbotron">
					<div className="container-fluid">
							<div className="row">
								<div className="col-md-10" >
									<h2>Phone Catalogue App</h2>
								</div>
							</div>
							<div className="row">
								<SelectControls />
								<PhoneList phones={list} />
							</div>
						</div>
					</div>
				);
		    }
		}
		export default App;

The `src/App.css` file content can be cleared. Finally, `src/index.js` can be set to the following:

		import React from 'react';
		import ReactDOM from 'react-dom';
		import App from './App';
		import '../node_modules/bootstrap/dist/css/bootstrap.css';

		ReactDOM.render(<App />, document.getElementById('root'));

The browser should now be rendering the page correctly (although their is no user interaction support yet).

#### Exercise.

Add a badge to the header that shows the number of phones displayed on the page:

![][exercise]

-----------------------
On completion, from the `threeApps/phoneCatalogue` folder, type the following commands:

         $ git add -A
         $ git commit -m "Phone Catalogue - Static version completed"

[phonesUI]: ./img/PhoneCatalogue.png
[files]: ./img/files.png
[phonesDesign]: ./img/PhoneCatalogueDesign.png
[partial]: ./img/partialPhone.png
[exercise]: ./img/exercise.png
[images]: ./phoneSpecs.zip
[data]: ./data.zip